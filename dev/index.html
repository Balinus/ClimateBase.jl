<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · ClimateBase</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="https://fonts.googleapis.com/css?family=Quicksand|Montserrat|Source+Code+Pro|Lora&amp;display=swap" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>ClimateBase</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li><a class="tocitem" href="#ClimArray:-the-core-data-structure"><span><code>ClimArray</code>: the core data structure</span></a></li><li><a class="tocitem" href="#Crash-course-to-DimensionalData.jl"><span>Crash-course to DimensionalData.jl</span></a></li><li><a class="tocitem" href="#Available-selectors"><span>Available selectors</span></a></li></ul></li><li><a class="tocitem" href="netcdf/">NetCDF IO</a></li><li><a class="tocitem" href="statistics/">Statistics</a></li><li><a class="tocitem" href="plotting/">Plotting</a></li><li><a class="tocitem" href="advanced/">Advanced functionality</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaClimate/ClimateBase.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h1><p><code>ClimateBase</code> is a Julia package offering basic functionality for analyzing data that are typically in the form used by climate sciences. These data are dimensional &amp; spatiotemporal but the corresponding dimensions all need special handling. For example the most common dimensions are longitude, latitude and time.</p><ul><li>longitude is by definition a periodic dimension</li><li>latitude is a linear dimension. However because the coordinate system most often used in climate sciences is a grid of longitude × latitude (in equal degrees) the area element of space depends on latitude and this needs to be taken into account.</li><li>time is a linear dimension <em>in principle</em>, but its values are <code>&lt;: AbstractDateTime</code> instead of <code>&lt;: Real</code>. The human calendar (where these values come from) is periodic but each period may not correspond to the same physical time, and this also needs to be taken into account.</li></ul><p><code>ClimateBase</code> is structured to deal with these intricacies, and in addition offer several functionalities commonly used, and sought after, by climate scientists. It also serves as the base building block for <code>ClimateTools</code>, which offers more advanced functionalities.</p><p>At the moment the focus of <code>ClimateBase</code> is <strong>not</strong> on operating on data <em>on disk</em>. It is designed for in-memory climate data exploration and manipulation.</p><h3 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h3><p>This package is registered and you can install it with</p><pre><code class="language-julia hljs">using Pkg; Pkg.add(&quot;ClimateBase&quot;)</code></pre><p>Make sure your installed version coincides with the one in this docs (see bottom left corner of this page).</p><h2 id="ClimArray:-the-core-data-structure"><a class="docs-heading-anchor" href="#ClimArray:-the-core-data-structure"><code>ClimArray</code>: the core data structure</a><a id="ClimArray:-the-core-data-structure-1"></a><a class="docs-heading-anchor-permalink" href="#ClimArray:-the-core-data-structure" title="Permalink"></a></h2><p>This project treats &quot;climate data&quot; as an instance of <a href="#ClimateBase.ClimArray-Tuple{AbstractArray, Tuple}"><code>ClimArray</code></a>. At the moment <code>ClimArray</code> is a subtype of <code>DimArray</code> from DimensionalData.jl. A brief introduction to DimensionalData.jl is copied here from its docs, because basic handling of a <code>ClimArray</code> comes from DimensionalData.jl. DimensionalData.jl allows to dimensionally-index data by their values.</p><p>E.g. you can create an array with</p><pre><code class="language-julia hljs">using ClimateBase, Dates
Time = ClimateBase.Ti # `Time` is more intuitive than `Ti`
lats = -90:5:90
lons = 0:10:359
t = Date(2000, 3, 15):Month(1):Date(2020, 3, 15)
# Here we wrap all dimension data into proper dimensions:
dimensions = (Lon(lons), Lat(lats), Time(t))
# where `Lon, Lat, Time` are `Dimension`s exported by ClimateBase
# combining the array data with dimensions makes a `ClimArray`:
data = rand(36, 37, 241) # same size as `dimensions`
A = ClimArray(data, dimensions)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ClimArray with dimensions: 
  Lon Sampled 0:10:350 ForwardOrdered Regular Points,
  Lat Sampled -90:5:90 ForwardOrdered Regular Points,
  Ti Sampled Dates.Date(&quot;2000-03-15&quot;):Dates.Month(1):Dates.Date(&quot;2020-03-15&quot;) ForwardOrdered Regular Points
and data: 36×37×241 Array{Float64, 3}
[:, :, 1]
 0.88811   0.474845  0.485183  0.0604275  …  0.0435835  0.528158  0.0037455
 0.459623  0.954147  0.476794  0.433398      0.855685   0.913875  0.774491
 0.531902  0.108424  0.96233   0.285074      0.259575   0.356773  0.103045
 0.548468  0.695225  0.79872   0.300507      0.54987    0.826006  0.584341
 ⋮                                        ⋱             ⋮         
 0.992593  0.83722   0.62236   0.34106       0.435797   0.926446  0.318077
 0.495742  0.60361   0.218905  0.0790675     0.515324   0.058565  0.577476
 0.4717    0.211474  0.996879  0.133059      0.463309   0.155407  0.0518041
 0.511172  0.352218  0.827124  0.437741   …  0.562199   0.927975  0.749465
[and 240 more slices...]</code></pre><p>You can then select a specific time slice at <code>Date(2011,5,15)</code> and a longitude interval between 0 and 30 degrees like so:</p><pre><code class="language-julia hljs">B = A[Lon(Between(0, 30)), Time(At(Date(2011,5,15)))]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ClimArray with dimensions: 
  Lon Sampled 0:10:30 ForwardOrdered Regular Points,
  Lat Sampled -90:5:90 ForwardOrdered Regular Points
and data: 4×37 Matrix{Float64}
 0.498958  0.819531  0.655161  0.738314  …  0.131651  0.474843  0.979349
 0.889101  0.726213  0.108981  0.557819     0.825845  0.328824  0.393178
 0.646765  0.462987  0.674986  0.570122     0.658705  0.333713  0.1118
 0.622484  0.12106   0.294883  0.135153     0.636706  0.115207  0.851184</code></pre><p>With <code>ClimArray</code> you can use convenience, physically-inspired functions that do automatic (and correct) weighting. For example the latitudinal mean of <code>B</code> is simply</p><pre><code class="language-julia hljs">C = latmean(B)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ClimArray with dimensions: 
  Lon Sampled 0:10:30 ForwardOrdered Regular Points
and data: 4-element Vector{Float64}
[0.545703, 0.462818, 0.407419, 0.486559]</code></pre><p>where in this averaging process each data point is weighted by the cosine of its latitude.</p><h3 id="Making-a-ClimArray"><a class="docs-heading-anchor" href="#Making-a-ClimArray">Making a <code>ClimArray</code></a><a id="Making-a-ClimArray-1"></a><a class="docs-heading-anchor-permalink" href="#Making-a-ClimArray" title="Permalink"></a></h3><p>You can create a <code>ClimArray</code> yourself, or you can load data from an <code>.nc</code> file with CF-conventions, see <a href="netcdf/#NetCDF-IO">NetCDF IO</a>.</p><article class="docstring"><header><a class="docstring-binding" id="ClimateBase.ClimArray-Tuple{AbstractArray, Tuple}" href="#ClimateBase.ClimArray-Tuple{AbstractArray, Tuple}"><code>ClimateBase.ClimArray</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ClimArray(A::Array, dims::Tuple; name = &quot;&quot;, attrib = nothing)</code></pre><p><code>ClimArray</code> is a structure that contains numerical array data bundled with dimensional information, a name and an <code>attrib</code> field (typically a dictionary) that holds general attributes. You can think of <code>ClimArray</code> as a in-memory representation of a CFVariable.</p><p>At the moment, a <code>ClimArray</code> is using <code>DimArray</code> from DimensionalData.jl, and all basic handling of <code>ClimArray</code> is offered by <code>DimensionalData</code> (see below).</p><p><code>ClimArray</code> is created by passing in standard array data <code>A</code> and a tuple of dimensions <code>dims</code>. See <a href="netcdf/#ClimateBase.ncread"><code>ncread</code></a> to automatically create a <code>ClimArray</code> from a .nc file. For obtaining the raw numeric values of a <code>ClimArray</code> or any of its dimensions, use the function <a href="#ClimateBase.gnv"><code>gnv</code></a>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">using ClimateBase, Dates
Time = ClimateBase.Ti # more intuitive name for time dimension
lats = -90:5:90
lons = 0:10:359
t = Date(2000, 3, 15):Month(1):Date(2020, 3, 15)
# dimensional information:
dimensions = (Lon(lons), Lat(lats), Time(t))
data = rand(36, 37, 241) # numeric data
A = ClimArray(data, dimensions)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/ClimateBase.jl/blob/36b3834cf18ec16f7c514c936278bfd0421c7a45/src/core/coredefs.jl#L142-L170">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimateBase.gnv" href="#ClimateBase.gnv"><code>ClimateBase.gnv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gnv(object) → x</code></pre><p>Short for &quot;get numeric value&quot;, this function will return the pure numeric value(s) of the given object. Convenience function for quickly getting the numeric data of dimensional arrays or dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaClimate/ClimateBase.jl/blob/36b3834cf18ec16f7c514c936278bfd0421c7a45/src/core/coredefs.jl#L21-L26">source</a></section></article><p>It is strongly recommended to use the dimensions we export (because we dispatch on them and use their information):</p><pre><code class="language-julia hljs">for D in ClimateBase.STANDARD_DIMS
    println(D, &quot; (full name = $(DimensionalData.name(D)))&quot;)
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Lon (full name = Longitude)
Lat (full name = Latitude)
Ti (full name = Time)
Hei (full name = Height)
Pre (full name = Pressure)
Coord (full name = )</code></pre><p>We explicitly assume that <code>Lon, Lat</code> are measured in degrees and not radians or meters (extremely important for spatial averaging processes).</p><h2 id="Crash-course-to-DimensionalData.jl"><a class="docs-heading-anchor" href="#Crash-course-to-DimensionalData.jl">Crash-course to DimensionalData.jl</a><a id="Crash-course-to-DimensionalData.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Crash-course-to-DimensionalData.jl" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="DimensionalData" href="#DimensionalData"><code>DimensionalData</code></a> — <span class="docstring-category">Module</span></header><section><div><p><strong>DimensionalData</strong></p><p><a href="https://rafaqz.github.io/DimensionalData.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt/></a> <a href="https://rafaqz.github.io/DimensionalData.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt/></a> <img src="https://github.com/rafaqz/DimensionalData.jl/workflows/CI/badge.svg" alt="CI"/> <a href="https://codecov.io/gh/rafaqz/DimensionalData.jl"><img src="https://codecov.io/gh/rafaqz/DimensionalData.jl/branch/master/graph/badge.svg" alt="Codecov"/></a> <a href="https://github.com/JuliaTesting/Aqua.jl"><img src="https://img.shields.io/badge/Aqua.jl-%F0%9F%8C%A2-aqua.svg" alt="Aqua.jl Quality Assurance"/></a></p><p>DimensionalData.jl provides tools and abstractions for working with datasets that have named dimensions, and optionally a lookup index. It provides no-cost abstractions for named indexing, and fast index lookups.</p><p>DimensionalData is a pluggable, generalised version of <a href="https://github.com/JuliaArrays/AxisArrays.jl">AxisArrays.jl</a> with a cleaner syntax, and additional functionality found in NamedDims.jl. It has similar goals to pythons <a href="http://xarray.pydata.org/en/stable/">xarray</a>, and is primarily written for use with spatial data in <a href="https://github.com/rafaqz/Rasters.jl">Rasters.jl</a>.</p><p>The basic syntax is:</p><pre><code class="language-julia hljs">julia&gt; using DimensionalData

julia&gt; rand(X(10.0:40.0), Y(50))
31×50 DimArray{Float64,2} with dimensions:
  X Sampled 10.0:1.0:40.0 ForwardOrdered Regular Points,
  Y
 0.793097  0.489866  0.462396  …  0.910434  0.850573   0.183605
 0.76277   0.737544  0.290279     0.742267  0.686086   0.530159
 ⋮                             ⋱
 0.281043  0.979182  0.868658     0.642477  0.139536   0.540512
 0.546036  0.83382   0.530098  …  0.351608  0.0385814  0.159299

julia&gt; A[Y=1, X=1:10]
10-element DimArray{Float64,1} with dimensions:
  X Sampled 10.0:1.0:19.0 ForwardOrdered Regular Points
and reference dimensions: Y
 0.245691
 0.902444
 0.777441
 ⋮
 0.744612
 0.440409
 0.631956</code></pre><p><a href="https://rafaqz.github.io/DimensionalData.jl/stable">See the docs for more details</a></p><p>Some properties of DimensionalData.jl objects:</p><ul><li>broadcasting and most Base methods maintain and sync dimension context.</li><li>comprehensive plot recipes for Plots.jl.</li><li>a Tables.jl interface with <code>DimTable</code></li><li>multi-layered <code>DimStack</code>s that can be indexed together,    and have base methods applied to all layers.</li><li>the Adapt.jl interface for use on GPUs, even as GPU kernel arguments.</li><li>traits for handling a wide range of spatial data types accurately.</li></ul><p><strong>Methods where dims can be used containing indices or Selectors</strong></p><p><code>getindex</code>, <code>setindex!</code> <code>view</code></p><p><strong>Methods where dims, dim types, or <code>Symbol</code>s can be used to indicate the array dimension:</strong></p><ul><li><code>size</code>, <code>axes</code>, <code>firstindex</code>, <code>lastindex</code></li><li><code>cat</code>, <code>reverse</code>, <code>dropdims</code></li><li><code>reduce</code>, <code>mapreduce</code></li><li><code>sum</code>, <code>prod</code>, <code>maximum</code>, <code>minimum</code>,</li><li><code>mean</code>, <code>median</code>, <code>extrema</code>, <code>std</code>, <code>var</code>, <code>cor</code>, <code>cov</code></li><li><code>permutedims</code>, <code>adjoint</code>, <code>transpose</code>, <code>Transpose</code></li><li><code>mapslices</code>, <code>eachslice</code></li></ul><p><strong>Methods where dims can be used to construct <code>DimArray</code>s:</strong></p><ul><li><code>fill</code>, <code>ones</code>, <code>zeros</code>, <code>falses</code>, <code>trues</code>, <code>rand</code></li></ul><p><strong><strong>Note</strong>: recent changes have greatly reduced the exported API</strong></p><p>Previously exported methods can me brought into global scope by <code>using</code> the sub-modules they have been moved to - <code>LookupArrays</code> and <code>Dimensions</code>:</p><pre><code class="language-julia hljs">using DimensionalData
using DimensionalData.LookupArrays, DimensionalData.Dimensions</code></pre><p><strong>Alternate Packages</strong></p><p>There are a lot of similar Julia packages in this space. AxisArrays.jl, NamedDims.jl, NamedArrays.jl are registered alternative that each cover some of the functionality provided by DimensionalData.jl. DimensionalData.jl should be able to replicate most of their syntax and functionality.</p><p><a href="https://github.com/mcabbott/AxisKeys.jl">AxisKeys.jl</a> and <a href="https://github.com/Tokazama/AbstractIndices.jl">AbstractIndices.jl</a> are some other interesting developments. For more detail on why there are so many similar options and where things are headed, read this <a href="https://github.com/JuliaCollections/AxisArraysFuture/issues/1">thread</a>.</p><p>The main functionality is explained here, but the full list of features is listed at the <a href="@ref">API</a> page.</p></div></section></article><h2 id="Available-selectors"><a class="docs-heading-anchor" href="#Available-selectors">Available selectors</a><a id="Available-selectors-1"></a><a class="docs-heading-anchor-permalink" href="#Available-selectors" title="Permalink"></a></h2><table><tr><th style="text-align: left">Selector</th><th style="text-align: left">Description</th></tr><tr><td style="text-align: left">[<code>At(x)</code>]</td><td style="text-align: left">get the index exactly matching the passed in value(s)</td></tr><tr><td style="text-align: left">[<code>Near(x)</code>]</td><td style="text-align: left">get the closest index to the passed in value(s)</td></tr><tr><td style="text-align: left">[<code>Contains(x)</code>]</td><td style="text-align: left">get indices where the value x falls within an interval</td></tr><tr><td style="text-align: left">[<code>Where(f)</code>]</td><td style="text-align: left">filter the array axis by a function of the dimension index values.</td></tr><tr><td style="text-align: left">[<code>a..b</code>]</td><td style="text-align: left">get all indices between two values, inclusively.</td></tr><tr><td style="text-align: left">[<code>OpenInterval(a, b)</code>]</td><td style="text-align: left">get all indices between <code>a</code> and <code>b</code>, exclusively.</td></tr><tr><td style="text-align: left">[<code>Interval{A,B}(a, b)</code>]</td><td style="text-align: left">get all indices between <code>a</code> and <code>b</code>, as <code>:closed</code> or <code>:open</code>.</td></tr></table></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="netcdf/">NetCDF IO »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.13 on <span class="colophon-date" title="Monday 28 February 2022 12:11">Monday 28 February 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
